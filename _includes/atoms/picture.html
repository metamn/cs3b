<!-- http://picture.responsiveimages.org/ -->

{% if include.id %}
  {% assign id = include.id | times: 1 %}
  {% assign image = page.images[id] %}
  
  {% assign title = image.title %}
  {% assign figcaption = image.figcaption %}
  {% assign desktop = image.desktop %}
  {% assign tablet = image.tablet %}
  {% assign mobile = image.mobile %}
  {% assign large = image.large %}
{% else %}
  {% assign title = include.title %}
  {% assign figcaption = include.figcaption %}
  {% assign desktop = include.desktop %}
  {% assign tablet = include.tablet %}
  {% assign mobile = include.mobile %}
  {% assign large = include.large %}
{% endif %}


{% if mobile == null %}
  {% assign mobile = desktop %}
{% endif %}
{% if tablet == null %}
  {% assign tablet = desktop %}
{% endif %}
{% if figcaption == null %}
  {% assign figcaption = title %}
{% endif %}




<figure id="{% include atoms/classname.html title=title %}">
  <picture>
    <!--[if IE 9]><video style="display: none;"><![endif]-->
    <source media="(max-width: 30em" srcset="{{ site.url }}/{{ site.images }}/{{ mobile }}, {{ site.url }}/{{ site.images }}/{{ tablet }} 2x">
    <source media="(max-width: 48em" srcset="{{ site.url }}/{{ site.images }}/{{ tablet }}">
    
    {% if large %}
      <source media="(min-width: 90em" srcset="{{ site.url }}/{{ site.images }}/{{ large }}">
    {% endif %}
    
    <!--[if IE 9]></video><![endif]-->
    <img src="{{ site.url }}/{{ site.images }}/{{ desktop }}" alt="{{ title }}">
  </picture>
  
  <figcaption>{{ figcaption }}</figcaption>
</figure>